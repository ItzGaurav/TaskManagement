<app-header [isUserLoggedIn]="true"></app-header>
<div class="container">
    <div class="row">
        <br />
        <br />

        <form class="form-inline" [formGroup]="myForm" novalidate (ngSubmit)="save(myForm)">
            <div class="panel panel-default">
                <div class="panel-body">
                    <div class="form-group col-xs-4">
                        <label>Project</label>
                       <select formControlName="projectId"  class="form-control">
                            <option [ngValue]="undefined" selected>Select Project</option>
                            <option *ngFor="let option of options" [ngValue]="option.projectId">{{option.projectName}}</option>
                        </select>
                    </div>

                    <div class="form-group col-xs-4">
                        <label>Task Name</label>
                        <input type="text" class="form-control" formControlName="taskName">
                        <!--<small *ngIf="!myForm.controls.taskName.valid" class="text-danger">
                            Name is required (minimum 5 characters).
                        </small>-->
                        <!--<div *ngIf="!myForm.controls.taskName.valid" class="validationerror">Name required</div>-->
                    </div>

                    <div class="form-group col-xs-2">
                        
                       <!-- <input type="date" name="plannedStartDate" class="form-control" [ngModel]="model.plannedStartDate | date:'yyyy-MM-dd'" (ngModelChange)="model.plannedStartDate = $event" [value]="datee | date:'yyyy-MM-dd'" #plannedStartDate="ngModel" required placeholder="Planned Start Date">-->

                        <label>Planned Start Date</label>
                        <input type="date" class="form-control" formControlName="plannedStartDate" >
                    </div>
                    <div class="form-group col-xs-2">
                        <label>Planned End Date</label>
                        <input type="date" class="form-control"  formControlName="plannedEndDate">
                    </div>
                    <div class="form-group col-xs-12">
                        <label>Description</label>
                        <textarea class="form-control" formControlName="description"></textarea>
                    </div>
                </div>
            </div>

            <div formArrayName="tasktype">
                <div *ngFor="let address of myForm.controls.tasktype.controls; let i=index" class="panel panel-default">
                    <div class="panel-heading">
                        <span>Task {{i + 1}}</span>
                        <span class="glyphicon glyphicon-remove pull-right" *ngIf="myForm.controls.tasktype.controls.length > 1" (click)="removeTasks(i)"></span>
                    </div>
                    <div class="panel-body" [formGroupName]="i">
                        <taskForm [group]="myForm.controls.tasktype.controls[i]"></taskForm>
                    </div>
                </div>
            </div>
            <div class="form-group col-xs-10">
                <label></label>
            </div>
            <div class="form-group col-xs-2">
                <button type="button" class="btn btn-success btn-number pull-right" (click)="addTaskType()">
                    <span class="glyphicon glyphicon-plus"></span> Add one more task type
                </button>

            </div>


            <br />
            <br />
            <div class="form-group col-xs-12">
                <button type="submit" class="btn btn-primary pull-right btn-sm" [disabled]="!myForm.valid">
                    <span class="glyphicon glyphicon-send"></span> Submit
                </button>
            </div>
        </form>

    </div>

</div>
